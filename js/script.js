var ecoTemplates={};(function(){ecoTemplates.notifications=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s;t.push('<div class="notifications">\n  <ul>'),s=this.notifications;for(n=0,i=s.length;n<i;n++)e=s[n],t.push("\n    <li>"),t.push(r(e.notification_text)),t.push("</li>\n  ");t.push("</ul>\n</div>")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}}).call(this),function(){ecoTemplates.search=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s,o,u,a,f,l,c,h;if(this.trades.length){t.push("\n"),l=this.trades;for(i=0,u=l.length;i<u;i++){n=l[i],t.push('\n  <li class="trade" data-button="Expand" data-trade-id="'),t.push(r(n.trade_id)),t.push('">\n  <div class="account pull-left '),t.push(r(n.user_status)),t.push('">\n    <img src="'),t.push(r(n.user_img)),t.push('"><a href="'),t.push(r(n.user_url)),t.push('">'),t.push(r(n.user)),t.push('</a>\n  </div>\n  <div class="trade-div">\n    <ul class="trans-trade pull-left">\n      '),c=n.selling_trade;for(s=0,a=c.length;s<a;s++)e=c[s],t.push('\n      <li class="item '),t.push(r(e.quality)),t.push('">\n        <a href="'),t.push(r(e.link)),t.push('" title="'),t.push(r(e.name)),t.push('"><img class="item-image" src="'),t.push(r(e.img)),t.push('"></a>\n      </li>\n      ');t.push('\n    </ul>\n    <div class="trade-arrow"></div>\n    <ul class="trans-trade pull-right">\n      '),h=n.buying_trade;for(o=0,f=h.length;o<f;o++)e=h[o],t.push('\n      <li class="item '),t.push(r(e.quality)),t.push('">\n        <a href="'),t.push(r(e.link)),t.push('" title="'),t.push(r(e.name)),t.push('"><img class="item-image" src="'),t.push(r(e.image)),t.push('"></a>\n      </li>\n      ');t.push('\n    </ul>\n  </div>\n  <div class="expand"><a>Expand</a></div>\n</li>\n')}t.push("\n")}else t.push("\n  No search results\n")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}}.call(this),function(){ecoTemplates.trade=function(e){e||(e={});var t=[],n=function(e){var n=t,r;return t=[],e.call(this),r=t.join(""),t=n,i(r)},r=function(e){return e&&e.ecoSafe?e:typeof e!="undefined"&&e!=null?o(e):""},i,s=e.safe,o=e.escape;return i=e.safe=function(e){if(e&&e.ecoSafe)return e;if(typeof e=="undefined"||e==null)e="";var t=new String(e);return t.ecoSafe=!0,t},o||(o=e.escape=function(e){return(""+e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}),function(){(function(){var e,n,i,s;t.push('<p class="description">'),t.push(r(this.description)),t.push('</p>\n<div class="comments">'),s=this.comments;for(n=0,i=s.length;n<i;n++)e=s[n],t.push('\n  <div class="comment">\n    <div class="account pull-left '),t.push(r(e.user_status)),t.push('">\n      <img src="'),t.push(r(e.user_img)),t.push('"><a href="'),t.push(r(e.user_url)),t.push('">'),t.push(r(e.user)),t.push("</a>\n    </div>\n    <p>"),t.push(r(e.comment)),t.push("</p>\n  </div>");t.push("\n</div>")}).call(this)}.call(e),e.safe=s,e.escape=o,t.join("")}}.call(this),function(){var e,t,n,r,i,s,o;$("#search input").typeahead({source:["Scorch Shot","Flare Gun","Fire Axe"]}),$(".top-bar-nav li a").tooltip({placement:"bottom"}),e=function(e,t){return history.pushState!=null&&t&&history.pushState(null,null,"search/"+e),$.get("../search.json",function(e){return $(".trades").append(ecoTemplates.search(e)),$(".item a").tooltip({placement:"bottom"}),$("#search-results").slideDown(400)})},i=function(){return $("#search-results").slideUp(400),$(".trade").remove()},o=function(t){return t==null&&(t=!0),$(".trade").length!==0&&i(),document.title=$("#search_field").val()+" results on Treddit",e($("#search_field").val(),t),!1},$("#search .btn").click(o),s=function(e,t){var n;return n=$(".trade:nth-child("+e+")").data("trade-id"),$.get("../trade.json?id="+n,function(r){return history.pushState&&t&&history.pushState(null,null,"/trade/"+n),$(".hero-search").css("left","-101%"),$("#search-results").slideUp(function(){return $(".trade:not(:nth-child("+e+"))").css("display","none"),$(".trade:nth-child("+e+") .trade-div").after(ecoTemplates.trade(r)),$("#search-results").addClass("all-round"),$("#search-results").css("margin-top","-"+$(".hero-search").outerHeight()+"px").slideDown()})})},n={notifications:[{notification_text:"Foo has barred!"},{notification_text:"There's a new trade for the Huntsman!"}]},r="state"in window.history,t=location.href,$(window).bind("popstate",function(e){var n,s;n=!r&&location.href===t,r=!0;if(n)return;s=window.location.pathname.split("/");if(s.length===2&&s[0]==="search")return $("#search_field").val(unescape(s[1])),o(!1);if(s.length!==2||s[0]!=="trade")return document.title="Treddit",$("#search_field").val(""),i()}),$("#search_field").submit(o),$(".form-search").submit(o),$("#notifications").popover({placement:"bottom",title:"Notifications",content:function(){return"hi"},trigger:"manual"}),$("#notifications").click(function(){return $("#notifications").popover("toggle"),$("#notifications").tooltip("hide")}),$(".trades").on("click",".trade .expand a",function(e){return s($(this).index()+1,!0)})}.call(this)